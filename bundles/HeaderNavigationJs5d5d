function clearGlobalVariables(){Username=null;UserDisplayName=null;IsAdministrator=null;IsBackendUser=null;IsNemaStaff=null;IsNemaMember=null;IsAuthenticated=null}function login(){var n=$("#hdLoginHref").val();window.location.href="/login"}function logout(){clearGlobalVariables();event.srcElement.href="/Sitefinity/SignOut?sts_signout=true&redirect_uri="}function callBackInit(){$(".nav-menu-button").removeAttr("disabled");AddTooltipOnEllipsisOnly(".nav-menu-link");AddTooltipOnEllipsisOnly(".drilldownbreadcrumbs .breadcrumbs-menu li a");AddTooltipOnEllipsisOnly(".drilldownbreadcrumbs .breadcrumbs-menu li span")}function bindSubmenu(n,t,i,r){var u="";return $.each(n,function(n,t){u+=t.PageLink===""||t.PageLink==="/"||t.PageLink=="null"||t.PageLink==null?'<li role="treeitem" data-parentid="'+i+'" class="nav-menu-li is-submenu-item is-drilldown-submenu-item" aria-selected="false"><a class="nav-menu-link menu-nested" aria-label="'+r.replace(/\s/g,"-").toLowerCase()+"-"+t.Title.replace(/\s/g,"-").toLowerCase()+'" href="/">'+t.Title+"<\/a><\/li>":'<li role="treeitem" data-parentid="'+i+'" class="nav-menu-li is-submenu-item is-drilldown-submenu-item" aria-selected="false"><a class="nav-menu-link menu-nested" aria-label="'+r.replace(/\s/g,"-").toLowerCase()+"-"+t.Title.replace(/\s/g,"-").toLowerCase()+'" href="'+t.PageLink+'">'+t.Title+"<\/a><\/li>";t.HasChild==!0&&(u+='<li role="treeitem" class="nav-menu-submenu is-drilldown-submenu-parent '+t.Title.replace(/\s/g,"").replace("&","")+'" aria-haspopup="true" aria-expanded="false" aria-selected="false" id="'+r.replace(/\s/g,"-").toLowerCase()+"-Hamburger-submenu-of-"+t.Title.replace(/\s/g,"-").toLowerCase()+"-"+i+'"><a href="javascript:void(0);" class="HeaderMainNavigation nav-menu-arrow" tabindex="0"><\/a>',u+='<ul class="menu submenu is-drilldown-submenu invisible drilldown-submenu-cover-previous" data-submenu aria-labelledby="'+r.replace(/\s/g,"-").toLowerCase()+"-Hamburger-submenu-of-"+t.Title.replace(/\s/g,"-").toLowerCase()+"-"+i+'" role="group" aria-hidden="true">',u+='<li class="js-drilldown-back"><a href="javascript:void(0);" tabindex="0">Back<\/a><\/li>',u+=bindSubmenu(t.SubNavigation,t.Title.replace(/\s/g,"").replace("&",""),i,t.AriaLabel),u+="<\/ul><\/li>")}),u}function FindandHighlight(n){$(n).each(function(n,t){var u=$(t).parent(),i,r;u!=null&&u!=undefined&&(i=$(u).data("parentid"),i!=undefined&&i!=null&&(r=$("li[data-id='"+i+"']"),r!=null&&r.length>0&&$(r).addClass("active")))})}function GetMainMenuItems(){setLoginInfo();$("#loadHamburgerMenu").val()=="true"&&($(".nav-menu-button").attr("disabled",!0),$("#mainnav").empty(),$.ajax({url:"/HeaderNavigation/GetNavigationLists",type:"GET",dataType:"json",contentType:"application/json; charset=utf-8",success:function(n){var t=function(){var t=$.Deferred();return GetMainMenuItemsuccess(n),t};t()},error:function(){console.log("Something went wrong, please try again")}}))}function GetMainMenuItemsuccess(n){var t="";$.each(n,function(n,i){t+=i.PageLink===""||i.PageLink==="/"||i.PageLink=="null"||i.PageLink==null?'<li role="treeitem" aria-selected="false" class="nav-menu-li"><a class="nav-menu-link" aria-label="Hamburger Menu Parent - '+i.Title+'" href="/">'+i.Title+"<\/a><\/li>":'<li role="treeitem" aria-selected="false" class="nav-menu-li"><a class="nav-menu-link" aria-label="Hamburger Menu Parent - '+i.Title+'" href='+i.PageLink+">"+i.Title+"<\/a><\/li>";i.HasChild==!0&&(t+='<li role="treeitem" class="nav-menu-submenu is-drilldown-submenu-parent '+i.Title.replace(/\s/g,"").replace("&","")+'" aria-haspopup="true" aria-expanded="false" aria-selected="false" id="Parent-Hamburger-submenu-of-'+i.Title.replace(/\s/g,"-").toLowerCase()+'"><a href="javascript:void(0);" class="HeaderMainNavigation nav-menu-arrow" tabindex="0"><\/a>',t+='<ul class="menu submenu is-drilldown-submenu invisible drilldown-submenu-cover-previous" data-submenu aria-labelledby="Parent-Hamburger-submenu-of-'+i.Title.replace(/\s/g,"-").toLowerCase()+'" role="group" aria-hidden="true">',t+='<li class="js-drilldown-back"><a href="javascript:void(0);" tabindex="0">Back<\/a><\/li>',t+=bindSubmenu(i.SubNavigation,i.Title.replace(/\s/g,"").replace("&",""),i.Id,i.AriaLabel),t+="<\/ul><\/li>")});$("#mainnav").append(t);$(".drilldown").foundation("_init",callBackInit);maindivheight=$("#mainnav").height()}function showMenuRecursively(n,t){var i,e,r,o,u,f;n!=null&&(i=n.parent().parent(),i!=null&&$(i).removeClass("invisible").addClass("is-active"),t&&(e=n.parent(),r=$(e).next(),r&&r.length>0?(o=$(r).attr("class"),o.indexOf("is-drilldown")>-1&&(u=$(r).find("ul"),u&&u.length>0?(f=u[0],$(f).removeClass("invisible").addClass("is-active"),$(".is-drilldown").css("height",$(f).height())):$(".is-drilldown").css("height",$(i).height()))):$(".is-drilldown").css("height",$(i).height())),$(i).parent().parent()!=null&&$(i).parent().parent().length>0&&$(i).parent().parent()[0].localName!="div"&&showMenuRecursively($(i),!1))}function TriggerHamburger(){var n=window.location.pathname;n.indexOf("/view")!=-1&&(n=n.substring(0,n.indexOf("/view")));n.indexOf("/topic")!=-1&&(n=n.substring(0,n.indexOf("/topic")));$menuChildren=$('.is-drilldown a[href="'+n+'"]');($menuChildren==null||$menuChildren.length<=0)&&($menuChildren=$('.is-drilldown a[href="'+n.toLowerCase()+'"]'),($menuChildren==null||$menuChildren.length<=0)&&(n=n.substring(0,n.length-1),$menuChildren=$('.is-drilldown a[href="'+n+'"]')),($menuChildren==null||$menuChildren.length<=0)&&($menuChildren=$('.is-drilldown a[href="'+n.toLowerCase()+'"]')));showMenuRecursively($($menuChildren[0]),!0)}function AddTooltipOnEllipsisOnly(n){$(n).bind("mouseenter",function(){var n=$(this);this.offsetWidth<this.scrollWidth&&!n.attr("title")&&n.attr("title",n.text())})}function setLoginInfo(){var n=$("#PageNodeId").val();$.ajax({type:"GET",cache:!1,url:"/RestApi/NemaServices/HeaderNavigation/GetUserDetails?pageNodeId="+n,contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){var t,i,r,u,f;n&&n.Username?(Username=n.Username,UserDisplayName=n.UserDisplayName,IsAdministrator=n.IsAdministrator,IsBackendUser=n.IsBackendUser,IsNemaStaff=n.IsNemaStaff,IsNemaMember=n.IsNemaMember,IsAuthenticated=Username!==null&&Username.length>1,showEditButtonIfAuthorized(),(IsNemaMember||IsNemaStaff||IsBackendUser)&&(newsAndTrendsIntelligenceTab(1),ShowRegisterationFormForNewUser(0)),gblcount=1,$(".login-link-div")&&($(".login-link-div").removeClass("display-inline-block"),$(".login-link-div").addClass("display-none")),$(".user-info-div")&&(t=$("#hrefUserName")[0],i=$("#hrefUserNameMobileView")[0],t&&(t.text=UserDisplayName),i&&(i.text=UserDisplayName),r=$("#hrefMyNavigation")[0],u=$("#hrefMyNavigationMobileView")[0],r&&(r.href=n.MyNemaNavigation),u&&(u.href=n.MyNemaNavigation),f=$(".imgAvatar"),f&&n.Avatar?($(".imgAvatar")[0].src=n.Avatar,$(".imgAvatar")[1]&&($(".imgAvatar")[1].src=n.Avatar),$(".imgAvatar").removeClass("display-none"),$(".imgAvatar").addClass("display-inline-block"),$(".cart-icon").removeClass("display-none"),$(".cart-icon").addClass("display-inline-block")):($(".imgAvatar").removeClass("display-inline-block"),$(".imgAvatar").addClass("display-none"),$(".cart-icon").removeClass("display-inline-block"),$(".cart-icon").addClass("display-none")),$(".user-info-div").removeClass("display-none"),$(".user-info-div").addClass("display-inline-block")),(IsBackendUser||IsNemaStaff)&&$("#PageUrlName").val().indexOf("/view/")<0?($("div.dropdown-pane.logout>ul li#editpage a").attr("href","/Sitefinity/adminapp/pages/"+$(" #PageUrlName").val()+"/Action/Edit"),$("div.dropdown-pane.logout>ul li#editpage").show(),$("div.dropdown-pane.logout>ul li#mobile-editpage a").attr("href","/Sitefinity/adminapp/pages/"+$(" #PageUrlName").val()+"/Action/Edit"),$("div.dropdown-pane.logout>ul li#mobile-editpage").show()):(IsBackendUser||IsNemaStaff)&&($("#PageUrlName").val().indexOf("/view/")>-1||$("#PageUrlName").val().indexOf("/blog/")>-1||$("#PageUrlName").val().indexOf("/podcastdetail/")>-1)&&($("div.dropdown-pane.logout>ul li#editpage").html("<span class='fontgrey'><em class='fa fa-edit'><\/em> Edit Page<\/span>"),$("div.dropdown-pane.logout>ul li#editpage").show(),$("div.dropdown-pane.logout>ul li#mobile-editpage").html("<span class='fontgrey'><em class='fa fa-edit'><\/em> Edit Page<\/span>"),$("div.dropdown-pane.logout>ul li#mobile-editpage").show())):($(".user-info-div")&&($(".user-info-div").removeClass("display-inline-block"),$(".user-info-div").addClass("display-none")),$(".login-link-div")&&($(".login-link-div").removeClass("display-none"),$(".login-link-div").addClass("display-inline-block")),ShowRegisterationFormForNewUser(1))},error:function(){console.log("Something went wrong, please try again")}})}function showEditButtonIfAuthorized(){if(IsBackendUser===!0&&!(window.location.href.indexOf("sf-content-action=preview")>-1)){var n=$(".content-type-edit-button");n.length!==0&&n.show()}}function userInfoHtmlContent(n){var t="";return t='<li style="display:inline-block;"><a class="username hide-for-small-only" data-toggle="login-dropdown" href="#" data-sf-role="sf-logged-in-name" aria-label="Click to access User Information" title = "User Info">'+n.Username+'<\/a><\/li><li style = "display:inline-block; position:relative" >',n.Avatar&&(t+='<a class="profile-picture" href = "javascript:;" title = "Profile Picture" aria-label="Profile Picture" data-toggle="login-dropdown" ><img class="avatar" src = "'+n.Avatar+'" data-sf-role="sf-logged-in-avatar" width = "100" height = "100" alt = "Profile Picture Image"><\/a>'),t+('<div class="dropdown-pane logout" id = "login-dropdown" data-dropdown data-hover="true" data-hover-delay="400" data-hover-pane="true"><ul><li><a href="'+n.MyNemaNavigation+'" aria-label="Navigate to MyNEMA">MyNEMA<\/a><\/li> <li><a onclick="logout()" aria-label="Click to Logout">LogOut<\/a><\/li><\/ul><\/div><\/li>')}function loginLinkHtmlContent(){var n=$("#hdLoginHref").val();return'<li style="display:inline-block;"><a class="mr-2 loginClick" onclick="login();" aria-label="Click to Login" >Login<\/a><\/li>'}function newsAndTrendsIntelligenceTab(n){$("#newstrendsIntelligencetab")!=null&&$("#newstrendsIntelligencetab")!=undefined&&(n===1?$("#newstrendsIntelligencetab").removeClass("hide"):$("#newstrendsIntelligencetab").addClass("hide"))}function ShowRegisterationFormForNewUser(n){$("#dvmainformuserregister")!=null&&$("#dvmainformuserregister")!=undefined&&(n===1?($("#dvmainformuserregister").show(),$("#dvmainlogedinusermsg").hide()):($("#dvmainformuserregister").hide(),$("#dvmainformuserregister").html(""),$("#dvmainlogedinusermsg").show()))}var maindivheight=0,Username=null,UserDisplayName=null,IsAdministrator=null,IsBackendUser=null,IsNemaStaff=null,IsNemaMember=null,IsAuthenticated=null,gblcount;$(document).on("click",".nav-global-top",function(){var n=$(".logout")[0];n&&n.classList.remove("is-open")});$(document).ready(function(){var n,i,r,t,u,f,o,e,s;try{$("li.nav-mega-mainlink-container.allow-active").removeClass("active");n=$("#parentNodeTitle").val().replace("#","").replace("&","").replace("  ","_").replace(" ","_");n!=null&&n!=""&&n!=="/"?(i=$("a[data-toggle='"+n+"']").parent().data("id"),i!=undefined&&i!=null?(r=$("li[data-id='"+i+"']"),r!=null&&r.length>0&&$(r).addClass("active")):(t=$('a[href="/'+$(location).attr("pathname").split("/")[1]+'"]'),t!=undefined&&t!=null&&(u=$(t).parent().data("parentid"),u!=undefined&&u!=null?(f=$("li[data-id='"+u+"']"),f!=null&&f.length>0&&$(f).addClass("active")):FindandHighlight(t)))):(o=$(location).attr("pathname"),e=$('a[href="/'+o.split("/")[1]+'"]'),e!=undefined&&e!=null&&FindandHighlight(e));$(location).attr("pathname")==="/my-nema"?$('a[href|="/my-nema/newsroom"]').parent(".tabs-title").addClass("is-active"):$('a[href|="'+$(location).attr("pathname")+'"]').parent(".tabs-title").addClass("is-active");s=new URL(document.referrer).pathname;$(location).attr("pathname").indexOf("intelligence/view")>0&&$('a[href|="'+s+'"]').parent(".tabs-title").addClass("is-active")}catch(h){return""}});$(document).on("click",".nav-menu-button",function(){var n=window.location.pathname;n!=undefined&&n!="/"?($(".is-drilldown-submenu").removeClass("is-active").addClass("invisible"),TriggerHamburger()):($(".is-drilldown-submenu").removeClass("is-active").addClass("invisible"),$(".is-drilldown").css("height",$(".drilldown").height()));n!=undefined&&n!="/"&&($menuChildren=$('.is-drilldown a[href="'+n+'"]'))});gblcount=0