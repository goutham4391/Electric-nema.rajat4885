function pageclick(n){var i=$("ul.nema-news-accordion li.is-active").attr("title"),t=$("ul.nema-news-accordion li.is-active").attr("categoryid");currentcat=t;AppendLoader(currentcat);i=="Intelligence"?getPagesFromIntelligence(t,n):$.ajax({type:"GET",url:"/customapi/NemaNewsApi/GetPagewisedata?pageno="+n+"&type="+currentcat,contentType:"application/json; charset=utf-8",cache:!1,beforeSend:function(){$(".ajax-loader-news").show()},success:function(t){var u=$("#starShowHide").val(),i='<div class="panel-container news-panel-container">',r;currentcat==="-1"?($("#myNemaCategories").html(""),i+=contentProductAreas(t.Data.NemaNewsProductAreas,u,!0),i+=contentData(t.Data.NemaNewsDetails,u,!1)):i+=contentData(t.Data.NemaNewsDetails,u,!1);i+="<\/div>";i+="<div class='pagination-container text-center'><nav><ul class='pagination pg"+currentcat.toString()+"'><\/ul><\/nav><\/div>";$("#my-nema-content").html(i);BindAccordionContentData(currentcat,i);r="";n==1?(totalPages=Number(t.Data.NoofPages),$("#NoofPages").val(totalPages),current=n,r="pg"+currentcat.toString(),generatePaging(totalPages,n,$("."+r+""))):(current=n,r="pg"+currentcat.toString(),generatePaging(totalPages,n,$("."+r+"")),setpage(n));$(".pagination-container nav").each(function(n){$(this).attr("aria-label","Pagination label - "+(n+1))});$(".record-box.news-box a").each(function(n){$(this).wrap("<span/>");$(this).attr("class","arialabel");$(this).attr("aria-label","aria-label link-"+(n+1))})},complete:function(){$(".ajax-loader-news").hide()},error:function(n,t,i){$(".ajax-loader-news").hide();$("#dv").html("Result: "+t+" "+i+" "+n.status+" "+n.statusText)}})}function contentData(n,t){var i="";return $.each(n,function(n,r){var f,e,u,o,s;typeof r!="undefined"&&r!==null&&(console.log("News Type: "+r.NewsType),e=r.NewsTypeId!=null&&typeof r.NewsTypeId=="string"&&r.NewsTypeId.toUpperCase()!=="UNDEFINED"?r.NewsTypeId.toUpperCase():"",u=r.NewsType!=null&&typeof r.NewsType=="string"?r.NewsType:"All",f=e==="BLOG"||e==="PODCAST"?r.Img==undefined||r.Img==null||r.Img===""?'<a href="'+r.Url+'"><img src="/ResourcePackages/Nema/assets/dist/images/placeholder-images/300x265.png" alt="'+r.Title+'"><\/a>':'<a href="'+r.Url+'"><img src="'+r.Img+'" alt="'+r.AltText+'"><\/a>':r.Img==undefined||r.Img==null||r.Img===""?'<a href="'+r.Url+'"><img src="/ResourcePackages/Nema/assets/dist/images/placeholder-images/300x265.png" alt="'+r.Title+'"><\/a>':'<a href="'+r.Url+'"><img src="'+r.Img+'" alt="'+r.AltText+'"><\/a>',o="'"+r.Id+"'",s="'"+r.TagId+"'",i+=r.ShowExternalLinkImage?'<div class="grid-x record-box news-box"><div class="small-12 medium-3 large-3 cell"><div class="news-covers-item cell with-tag"><p class="tag publication blue">'+u+"<\/p>"+f+'<\/div><\/div><div class="small-12 medium-9 large-9 cell padding-left"><div class="news-content-box content-box"><div class="grid-x"><div class="small-11 medium-10 large-10 cell"><h3><a href="'+r.Url+'">'+r.Title+'<span class="title-spacer"><\/span><img src="/img/external-link.gif" alt="External Link Icon" /><\/a> <span> | '+r.NewsPublicationDate+"<\/span><\/h3><\/div>":'<div class="grid-x record-box news-box"><div class="small-12 medium-3 large-3 cell"><div class="news-covers-item cell with-tag"><p class="tag publication blue">'+u+"<\/p>"+f+'<\/div><\/div><div class="small-12 medium-9 large-9 cell padding-left"><div class="news-content-box content-box"><div class="grid-x"><div class="small-11 medium-10 large-10 cell"><h3><a href="'+r.Url+'">'+r.Title+"<\/a> <span> | "+r.NewsPublicationDate+"<\/span><\/h3><\/div>",t==="True"&&(i+='<div class="small-1 medium-2 large-2 cell text-right"><a class="star-link1" aria-label="'+r.Title+'" onclick="starClick('+o+", "+s+')"><svg typevalue="'+u+'" id="'+r.Id+'" class="staricon customstar" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20px" height="20px" viewBox="0 0 80.1 74.8" enable-background="new 0 0 80.1 74.8" xml: space="preserve"><polygon points="39.4,59.6 16.2,73.3 22.1,47 1.9,29.2 28.7,26.7 39.4,2 50,26.7 76.9,29.2 56.6,47 62.6,73.3 " /><\/svg><\/a><\/div>'),i+="<\/div><p>"+r.PageContent+"<\/p>",i+='<ul class="list content-box-options">',r.RelatedTopics.length>0&&(i+='<li><div class="topics"><div class="cell title">Related Topics<\/div> <div class="badges cell">',$.each(r.RelatedTopics,function(n,t){i+=t.IsPolicyTopic?'<a href="'+t.Url+'"><span>'+t.Title+"<\/span><\/a>":'<a href="'+t.Url+'"><span>'+t.Title+"<\/span><\/a>"}),i+="<\/div><\/div><\/li>"),i+="<\/ul><\/div><\/div><\/div>")}),i}function contentProductAreas(n){var t='<div class="grid-x grid-margin-x contentProductAreas" style="height:50px; overflow: hidden;"><div class="cell small-6 medium-8 large-9 mynewstopicwrap"><div class="palist mynewstopic"><div class="badges">';return $.each(n,function(n,i){var r="'"+i.Id+"'",u="'"+i.TagId+"'";t+='<a href="'+i.Url+'"> <span style="pointer-events: none;">'+i.Title+"<\/span><\/a > "}),t+='<\/div><\/div><\/div><div class="cell small-6 medium-4 large-3"><a href="javascript:void(0);" class="seemorebtn">Show All<\/a>',t+='<span class="customizelink"><a href="/my-nema/customize-experience?previousUrl='+location.href+'">Customize<\/a><\/span><\/div><\/div>'}function loadMyNemaProductAreas(n){var i=$("ul.nema-news-accordion li.is-active").attr("categoryid"),r,t;i==="-1"&&(r=$("#starShowHide").val(),currentcat=i,$("#myNemaCategories").html(""),t='<div class="panel-container news-panel-container">',t+=contentProductAreas(n,r,!0),t+="<\/div>",$("#myNemaCategories").html(t),$("#myNemaCategoriesacc").html(t))}function getNewsDataByCat(n){$("#"+n).empty();AppendLoader(n);$.ajax({url:"/customapi/NemaNewsApi/GetPagewisedata?pageno=1&type="+n,type:"GET",async:!0,cache:!1,beforeSend:function(){$(".ajax-loader-news").show()},success:function(t){var r,i,u;$(".ajax-loader-news").hide();r=$("#starShowHide").val();currentcat=n;currentpage=1;$(".tabs-panel").html("");i='<div class="panel-container news-panel-container">';n===-1&&(i+=contentProductAreas(t.Data.NemaNewsProductAreas,r,!0));i+=contentData(t.Data.NemaNewsDetails,r,!0);i+="<\/div>";i+="<div class='pagination-container text-center'><nav><ul class='pagination pg"+currentcat.toString()+"'><\/ul><\/nav><\/div>";$("#my-nema-content").html(i);$(".nema-news-accordion li").removeClass("is-active");$("[categoryid="+currentcat.toString()+"]").addClass("is-active");BindAccordionContentData(currentcat,i);totalPages=Number(t.Data.NoofPages);$("#NoofPages").val(totalPages);current=1;u="pg"+currentcat.toString();generatePaging(totalPages,1,$("."+u+""));$(".pagination-container nav").each(function(n){$(this).attr("aria-label","Pagination label - "+(n+1))});$(".record-box.news-box a").each(function(n){$(this).wrap("<span/>");$(this).attr("class","arialabel");$(this).attr("aria-label","aria-label link-"+(n+1))})},error:function(){$(".ajax-loader-news").hide();alert("Error loading news")}})}function getPagesFromIntelligence(n,t){AppendLoader("intelligencetab");$.ajax({url:"/NewsNema/GetIntelligenceArticlesPages?pageNo="+t,type:"GET",async:!0,cache:!1,beforeSend:function(){$(".ajax-loader-news").show()},success:function(i){var f,r,u;$(".ajax-loader-news").hide();f=$("#starShowHide").val();currentcat=n;currentpage=1;$(".tabs-panel").html("");r='<div class="panel-container news-panel-container">';r+=IntelligenceContentData(i.IntelligenceArticlesDetails,f,!0);r+="<\/div>";r+="<div class='pagination-container text-center'><nav><ul class='pagination pg"+currentcat.toString()+"'><\/ul><\/nav><\/div>";$("#my-nema-content").html(r);$(".nema-news-accordion li").removeClass("is-active");$("[categoryid="+currentcat.toString()+"]").addClass("is-active");BindAccordionContentData("intelligencetab",r);t==1?(totalPages=Number(i.Pagination.NoofPages),$("#NoofPages").val(totalPages),current=t,u="pg"+currentcat.toString(),generatePaging(totalPages,t,$("."+u+""))):(current=t,u="pg"+currentcat.toString(),generatePaging(totalPages,t,$("."+u+"")),setpage(t));$(".pagination-container nav").each(function(n){$(this).attr("aria-label","Pagination label - "+(n+1))});$(".record-box.news-box a").each(function(n){$(this).wrap("<span/>");$(this).attr("class","arialabel");$(this).attr("aria-label","aria-label link-"+(n+1))})},error:function(){$(".ajax-loader-news").hide();alert("Error loading news")}})}function IntelligenceContentData(n){var t="";return $.each(n,function(n,i){var r;r=i.ImageUrl===""||i.ImageUrl===null?'<a href="'+i.RedirectUrl+'"><img src="/ResourcePackages/Nema/assets/dist/images/placeholder-images/300x265.png" alt="Intelligence digest"><\/a>':'<a href="'+i.RedirectUrl+'"><img src="'+i.ImageUrl+'" alt="'+i.Title+'"/><\/a>';t+='<div class="grid-x record-box news-box"><div class="small-12 medium-3 large-3 cell"><div class="news-covers-item cell with-tag">'+r+'<\/div><\/div><div class="small-12 medium-9 large-9 cell padding-left"><div class="news-content-box content-box"><div class="grid-x"><div class="small-11 medium-10 large-10 cell"><h3><a target="_blank" href="'+i.RedirectUrl+'" title="'+i.DisplayUrl+'">'+i.Title+(i.RedirectUrl!=i.PageUrl?'<span class="title-spacer"><\/span><img src="/img/external-link.gif" title="'+i.DisplayUrl+'" style="vertical-align:baseline;border:none;margin:0 2px;width:10px;height:10px;" width="10" height="10" alt="">':"")+"<\/a> <span> | "+i.PublishDate+'<\/span><\/h3><\/div><div class="small-11 medium-10 large-10 cell"><small class="font-grey">'+i.PublicationSource+"<\/small><\/div>";t+="<\/div><p>"+i.Html+"<\/p>";i.RelatedTopics.length>0&&(t+='<ul class="list content-box-options"><li><div class="topics"><div class="cell title">Related Topics<\/div> <div class="badges cell">',$.each(i.RelatedTopics,function(n,i){t+=i.IsPolicyTopic?'<a href="'+i.Url+'"><span>'+i.Title+"<\/span><\/a>":'<a href="'+i.Url+'"><span>'+i.Title+"<\/span><\/a>"}),t+="<\/div><\/div><\/li><\/ul>");t+="<\/div><\/div><\/div>"}),t}function BindAccordionContentData(n,t){$(".nema-news-accordion .newstabpanelaccordion").html("");n==-1?$("#mynewstab").html(t):$("#"+n+"").html(t)}function AppendLoader(n){$(".nema-news-accordion .newstabpanelaccordion").html("");html='<div class="ajax-loader ajax-loader-news" role="complementary" aria-label="News Content is Loading Data">';html+='<img src="/ResourcePackages/Nema/assets/dist/images/loader-svg.svg" class="img-responsive" alt="Loader" />';html+="<\/div>";n==0?$("#my-nema-all").html(html):n==-1?$("#mynewstab").html(html):$("#"+n+"").html(html)}var currentcat=0;$(document).on("click",".seemorebtn",function(){$(".mynewstopic").toggleClass("hauto");$(".mynewstopic").hasClass("hauto")?($(".seemorebtn").html("Show Less"),$(".contentProductAreas").removeAttr("style")):($(".seemorebtn").html("Show All"),$(".contentProductAreas").css({height:"50px",overflow:"hidden"}))});$(document).ready(function(){$(".nema-news-accordion li.tabs-title > a").on("click",function(){$(".nema-news-accordion li.tabs-title").each(function(){$(this).removeClass("is-active")});$(this).parent(".nema-news-accordion li.tabs-title").addClass("is-active")});$(".nema-news-accordion li.accordion-item > a").on("click",function(){$(".nema-news-accordion li.accordion-item").each(function(){$(this).removeClass("open");$(this).addClass("closed")});$(this).parent().find(".accordion-content").attr("aria-hidden")==="false"?($(this).parent(".nema-news-accordion li.accordion-item").removeClass("closed"),$(this).parent(".nema-news-accordion li.accordion-item").addClass("open")):($(this).parent(".nema-news-accordion li.accordion-item").removeClass("open"),$(this).parent(".nema-news-accordion li.accordion-item").addClass("closed"))});$(".record-box.news-box a").each(function(n){$(this).wrap("<span/>");$(this).attr("class","arialabel");$(this).attr("aria-label","aria-label link-"+(n+1))})})